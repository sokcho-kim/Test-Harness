# 작업일지 - 2026-01-21

## 작업 내역

### [Test-Harness] 프로젝트 현황 파악 및 배포 전략 수립

**프로젝트 진행 상황 확인**
- Phase 1 (핵심 구조) 완료 상태
  - 데이터 모델 (`shared/core/models.py`)
  - LLM 어댑터 (`shared/adapters/`)
  - SQLite DB 클래스 (`shared/database/database.py`)
  - FastAPI 서버 기본 설정 완료
  - API 라우터는 스텁만 있음 (TODO 상태)
- Phase 2 (promptfoo 연동)부터 시작 필요
  - `PromptfooRunner` 미구현
  - API 라우터 실제 로직 필요

**배포 인프라 스펙 산정**
- 예상 사용자: 5-20명 (부서/팀 단위)
- 클라우드: GCP (추후 온프렘 이전 가능성)
- LLM: 현재 외부 API (Together AI, OpenAI), 추후 vLLM 가능

**DB 선택 논의**
- SQLite: Cloud Run에서 데이터 휘발 문제
- Firebase: NoSQL이라 코드 전면 수정 필요
- Supabase: 무료지만 외부 서비스 의존
- **최종 결정: GCP Cloud SQL (PostgreSQL)**

**배포 아키텍처 확정**
```
Cloud Run (API + Web) + Cloud SQL (PostgreSQL)
```
- 예상 비용: $50-70/월
- GCP 신규 가입 완료 → $300 무료 크레딧 (90일)

## 다음 할 일

### 환경 준비
- [ ] gcloud CLI 설치
- [ ] Docker 설치 확인
- [ ] Together AI / OpenAI API 키 준비

### GCP 설정
- [ ] Cloud SQL API 활성화
- [ ] Cloud Run API 활성화
- [ ] Artifact Registry API 활성화
- [ ] Cloud SQL 인스턴스 생성 (PostgreSQL)

### 개발 (Phase 2)
- [ ] DB 코드 asyncpg로 교체
- [ ] `shared/core/promptfoo_runner.py` 구현
- [ ] API 라우터 실제 로직 구현 (DB 연동)
- [ ] 테스트 실행 서비스 구현
